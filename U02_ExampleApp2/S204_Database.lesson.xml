<?xml version='1.0' encoding='UTF-8'?>
<slide xmlns="https://ulearn.me/schema/v2" title="Часть 9. База данных" id="1ef461ef-a19e-4e07-8436-46fa16d51d26">
    <markdown>

        Сейчас у нас все данные приложения хранятся в памяти и при перезапуске приложения мы их теряем.
        В этой части мы подключим SQL базу данных, которая будет хранить все данные нашего приложения в файле.

        ### 9.1. Скачайте patch подключения базы

        [2_9.patch](https://drive.google.com/file/d/1-oRQRwMto2Hclq8sB3i5vTtIqAdOfVa-/view)

        ### 9.2. В IDEA примените патч

        Главное меню -> VCS -> Apply Patch...

        (но так как код у всех разный, то возможно не все изменения применятся - оставшуюся часть примените вручную)

        Проверьте что теперь при запуске приложения список первоначальных постов пустой. Добавьте несколько постов. Перезапустите приложение. Убедитесь что добавленные посты не удалились, и отображаются.

        Сделайте commit и push на github.

        ### 9.3. Просмотр содержимого базы

        Попробуйте при остановленном приложении просмотреть базу через [DBeaver](https://dbeaver.io/)


        |![alt_text](images/dbeaver-connect.png)|
        |-----|

        В следующем окне в Database/Schema вставьте

        file:/home/user/demo/

        где /home/user/demo полный путь до папки с проектом

        и в поля User name/Password вставьте root/root как это определено в `application.properties`

        Посмотрите данные которые есть в базе в таблице POST.


        |![alt_text](images/dbeaver.png)|
        |-----|


        Для следующего запуска нашего приложения demo-web может потребоваться закрыть DBeaver чтобы он снял блокировку с файла базы.

    </markdown>
</slide>
